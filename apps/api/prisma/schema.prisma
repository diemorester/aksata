// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                    Int         @id @default(autoincrement())
  name                  String      @unique
  email                 String      @unique
  password              String
  avatar                String?
  phone                 String?     @unique
  isVerified            Boolean     @default(false)
  role                  Roles
  otp                   String?
  otpExpired            DateTime?
  changeEmailExpired    DateTime?
  changePasswordExpired DateTime?
  refreshToken          String?     @db.Text
  createdAt             DateTime    @default(now())
  updatedAt             DateTime    @updatedAt()
  Absensi               Absensi[]
  Pengajuan             Pengajuan[]
}

enum Roles {
  User
  SuperAdmin
  AdminHR
  AdminGudang
}

model Absensi {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt()
  clockIn   DateTime
  clockOut  DateTime
  location  String?
  status    Status
  date      DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
}

enum Status {
  Hadir
  Terlambat
  Sakit
  Cuti
  Izin
  Alpha
}

model Pengajuan {
  id         String     @id @default(cuid())
  date       DateTime
  nominal    Float
  company    Companies
  client     String
  keterangan String     @db.MediumText()
  tipeLembur OpsiLembur
  status     Boolean    @default(false)
  user       User       @relation(fields: [userId], references: [id])
  userId     Int
}

enum Companies {
  Ristoan
  Hayan
  Sirius
}

enum OpsiLembur {
  LemburSatu
  LemburDua
  LemburTiga
}

model Gudang {
  id String @id @default(cuid())
}
